<div class="form-container">
  <h2>{{ isEditMode() ? 'Редактирование пользователя' : 'Создание пользователя' }}</h2>

  @if (!loading()) {
    <form [formGroup]="userForm" (ngSubmit)="onSubmit()">
      <nz-form-item>
        <nz-form-label nzRequired>Имя</nz-form-label>
        <nz-form-control
          nzErrorTip="Имя должно содержать от 2 до 100 символов и состоять из букв, пробелов или дефисов"
        >
          <input nz-input formControlName="name" placeholder="Имя" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzRequired>Логин</nz-form-label>
        <nz-form-control nzErrorTip="Логин должен содержать от 3 до 30 символов (буквы, цифры, _ . -)">
          <input nz-input formControlName="username" placeholder="Логин" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzRequired>Email</nz-form-label>
        <nz-form-control nzErrorTip="Введите корректный email">
          <input nz-input formControlName="email" placeholder="Email" type="email" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzRequired>Телефон</nz-form-label>
        <nz-form-control nzErrorTip="Введите корректный номер телефона">
          <input nz-input formControlName="phone" placeholder="Телефон" />
        </nz-form-control>
      </nz-form-item>

      <nz-form-item>
        <nz-form-label nzRequired>Веб-сайт</nz-form-label>
        <nz-form-control nzErrorTip="Введите корректный URL сайта">
          <input nz-input formControlName="website" placeholder="Веб-сайт" />
        </nz-form-control>
      </nz-form-item>

      <h3>Адрес</h3>
      <div formGroupName="address">
        <nz-form-item>
          <nz-form-label nzRequired>Улица</nz-form-label>
          <nz-form-control nzErrorTip="Укажите улицу">
            <input nz-input formControlName="street" placeholder="Улица" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Дополнение</nz-form-label>
          <nz-form-control nzErrorTip="Укажите дополнение (номер дома, квартиры)">
            <input nz-input formControlName="suite" placeholder="Дополнение" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Город</nz-form-label>
          <nz-form-control nzErrorTip="Укажите город">
            <input nz-input formControlName="city" placeholder="Город" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Почтовый индекс</nz-form-label>
          <nz-form-control nzErrorTip="Укажите корректный почтовый индекс">
            <input nz-input formControlName="zipcode" placeholder="Почтовый индекс" />
          </nz-form-control>
        </nz-form-item>

        <div formGroupName="geo">
          <nz-form-item>
            <nz-form-label nzRequired>Широта</nz-form-label>
            <nz-form-control nzErrorTip="Укажите корректную широту">
              <input nz-input formControlName="lat" placeholder="Широта" />
            </nz-form-control>
          </nz-form-item>

          <nz-form-item>
            <nz-form-label nzRequired>Долгота</nz-form-label>
            <nz-form-control nzErrorTip="Укажите корректную долготу">
              <input nz-input formControlName="lng" placeholder="Долгота" />
            </nz-form-control>
          </nz-form-item>
        </div>
      </div>

      <h3>Компания</h3>
      <div formGroupName="company">
        <nz-form-item>
          <nz-form-label nzRequired>Название компании</nz-form-label>
          <nz-form-control nzErrorTip="Укажите название компании">
            <input nz-input formControlName="name" placeholder="Название компании" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Слоган</nz-form-label>
          <nz-form-control nzErrorTip="Укажите слоган компании">
            <input nz-input formControlName="catchPhrase" placeholder="Слоган" />
          </nz-form-control>
        </nz-form-item>

        <nz-form-item>
          <nz-form-label nzRequired>Сфера деятельности</nz-form-label>
          <nz-form-control nzErrorTip="Укажите сферу деятельности">
            <input nz-input formControlName="bs" placeholder="Сфера деятельности" />
          </nz-form-control>
        </nz-form-item>
      </div>

      <div class="form-actions">
        <button nz-button nzType="default" type="button" (click)="cancelEdit()">Отмена</button>
        <button nz-button nzType="primary" type="submit" [nzLoading]="submitting()">
          {{ isEditMode() ? 'Сохранить' : 'Создать' }}
        </button>
      </div>
    </form>
  }
</div>
